@use "../../../variables" as *;
@use "sass:color";

.loader {
  --background: linear-gradient(135deg, var(--accent-color), #cc1b00);
  --shadow: rgba(255, 34, 0, 0.25);
  --text: var(--text-color);
  --page: rgba(17, 17, 17, 0.15);
  --page-fold: rgba(17, 17, 17, 0.25);
  --duration: 3s;

  // Dark mode adjustments

  width: 200px;
  height: 140px;
  position: relative;

  &::before,
  &::after {
    --r: -6deg;
    content: "";
    position: absolute;
    bottom: 8px;
    width: 120px;
    top: 80%;
    box-shadow: 0 16px 12px var(--shadow);
    transform: rotate(var(--r));
  }

  &:before {
    left: 4px;
  }

  &:after {
    --r: 6deg;
    right: 4px;
  }

  div {
    width: 100%;
    height: 100%;
    border-radius: 13px;
    position: relative;
    z-index: 1;
    perspective: 600px;
    box-shadow: 0 4px 6px var(--shadow);
    background-image: var(--background);

    & {
      @media (prefers-color-scheme: dark) {
        --shadow: rgba(255, 34, 0, 0.3);
        --page: rgba(245, 245, 245, 0.15);
        --page-fold: rgba(245, 245, 245, 0.25);
      }
    }

    ul {
      margin: 0;
      padding: 0;
      list-style: none;
      position: relative;

      li {
        --r: 180deg;
        --o: 0;
        --c: var(--page);

        position: absolute;
        top: 10px;
        left: 10px;
        transform-origin: 100% 50%;
        color: var(--c);
        opacity: var(--o);
        transform: rotateY(var(--r));
        animation: var(--duration) ease infinite;

        &:nth-child(1) {
          --r: 0deg;
          --o: 1;
        }

        &:nth-child(2) {
          --c: var(--page-fold);
          animation-name: page-2;
        }

        &:nth-child(3) {
          --c: var(--page-fold);
          animation-name: page-3;
        }

        &:nth-child(4) {
          --c: var(--page-fold);
          animation-name: page-4;
        }

        &:nth-child(5) {
          --c: var(--page-fold);
          animation-name: page-5;
        }

        &:nth-child(6) {
          --o: 1;
        }

        svg {
          width: 90px;
          height: 120px;
          display: block;
        }
      }
    }
  }

  span {
    display: block;
    left: 0;
    right: 0;
    top: 100%;
    margin-top: 20px;
    text-align: center;
    color: var(--text);
    position: absolute;
  }
}

@keyframes page-2 {
  0% {
    transform: rotateY(180deg);
    opacity: 0;
  }
  20% {
    opacity: 1;
  }
  35%,
  100% {
    opacity: 0;
  }
  50%,
  100% {
    transform: rotateY(0deg);
  }
}

@keyframes page-3 {
  15% {
    transform: rotateY(180deg);
    opacity: 0;
  }
  35% {
    opacity: 1;
  }
  50%,
  100% {
    opacity: 0;
  }
  65%,
  100% {
    transform: rotateY(0deg);
  }
}

@keyframes page-4 {
  30% {
    transform: rotateY(180deg);
    opacity: 0;
  }
  50% {
    opacity: 1;
  }
  65%,
  100% {
    opacity: 0;
  }
  80%,
  100% {
    transform: rotateY(0deg);
  }
}

@keyframes page-5 {
  45% {
    transform: rotateY(180deg);
    opacity: 0;
  }
  65% {
    opacity: 1;
  }
  80%,
  100% {
    opacity: 0;
  }
  95%,
  100% {
    transform: rotateY(0deg);
  }
}

.text {
  animation: flash 3s linear infinite !important;
  display: inline-block;
  color: #cc1b00 !important;
  font-size: 20px;
  font-weight: 600;
}

@keyframes flash {
  0% {
    filter: hue-rotate(0deg);
  }
  50% {
    filter: hue-rotate(55deg);
  }
  100% {
    filter: hue-rotate(0deg);
  }
}

#container {
  position: fixed;
  height: 100%;
  width: 100%;
  top: 0;
  left: 0;
  background: #00000051;
  backdrop-filter: blur(14px);
  @extend %flex-style;
  z-index: 1000 !important;
}
